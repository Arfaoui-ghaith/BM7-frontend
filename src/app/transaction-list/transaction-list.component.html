<ng-container>
  <main id="main" class="main">

    <div class="pagetitle">
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item">Transactions</li>
          <li class="breadcrumb-item active">List</li>
        </ol>
      </nav>
    </div><!-- End Page Title -->

    <section class="section">
      <div class="row">
        <div class="col-lg-12">

          <div class="card">
            <div class="card-body">
              <h5 class="card-title">Transactions History</h5>

              <!-- Table with stripped rows -->
              <div class="datatable-wrapper datatable-loading no-footer sortable searchable fixed-columns"><div class="datatable-top">


              </div>
                <div class="datatable-container">

                  <p-table
                    #dt1
                    [value]="transactions"
                    dataKey="id"
                    [rows]="10"
                    [showCurrentPageReport]="true"
                    [rowsPerPageOptions]="[5, 10, 25]"
                    [loading]="loading"
                    [paginator]="true"
                    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
                    [globalFilterFields]="['category', 'date', 'amount', 'status']"
                    [tableStyle]="{ 'min-width': '50rem' }"
                  >
                    <ng-template pTemplate="header">
                      <tr>
                        <th pSortableColumn="category" style="width: 5.7174887892376685%;">
                          <div class="flex align-items-center">
                            Category
                            <p-sortIcon field="category"></p-sortIcon>
                            <p-columnFilter type="text" field="category" display="menu"></p-columnFilter>
                          </div>
                        </th>
                        <th pSortableColumn="date" style="width: 5.282511210762333%;">
                          <div class="flex align-items-center">
                            Date
                            <p-sortIcon field="date"></p-sortIcon>
                            <p-columnFilter type="text" field="date" display="menu"></p-columnFilter>
                          </div>
                        </th>
                        <th pSortableColumn="amount" style="width: 5.282511210762333%;">
                          <div class="flex align-items-center">
                            Amount
                            <p-sortIcon field="amount"></p-sortIcon>
                            <p-columnFilter type="numeric" field="amount" display="menu" currency="TND"></p-columnFilter>
                          </div>
                        </th>
                        <th pSortableColumn="status" style="width: 5.282511210762333%;">
                          <div class="flex align-items-center">
                            Status
                            <p-sortIcon field="status"></p-sortIcon>
                            <p-columnFilter field="status" matchMode="equals" display="menu">
                              <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                                <p-dropdown [ngModel]="value" [options]="statuses" (onChange)="filter($event.value)" placeholder="Any">
                                  <ng-template let-option pTemplate="item">
                                    <p-tag [value]="option.value" [severity]="getSeverity(option.label)"></p-tag>
                                  </ng-template>
                                </p-dropdown>
                              </ng-template>
                            </p-columnFilter>
                          </div>
                        </th>
                        <th style="width: 5.282511210762333%;">
                          <div class="flex align-items-center">
                            Actions
                          </div>
                        </th>
                      </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-transaction>
                      <tr>
                        <td>
                          <img [src]="transaction.image" style="width: 20px"  alt=""/> {{ transaction.category }}
                        </td>
                        <td>
                          {{ transaction.date | date: 'MM/dd/yyyy' }}
                        </td>
                        <td>
                          {{ transaction.amount | currency: 'TND':'symbol' }}
                        </td>
                        <td>
                          <p-tag [value]="transaction.status == true ? 'InCome' : 'Expense' " [severity]="getSeverity(transaction.status)"></p-tag>
                        </td>
                        <td>
                          <p-button icon="bi bi-trash" styleClass="p-button-danger" [style]="{ 'margin-right': '.5em' }"></p-button>

                          <p-button (click)="showDialog()" icon="bi bi-pencil" styleClass="p-button-warning"></p-button>
                          <p-dialog header="Edit Transaction" [(visible)]="visible" [modal]="true" [style]="{ width: '50vw' }" [draggable]="false" [resizable]="false">
                            <app-edit-transaction></app-edit-transaction>
                          </p-dialog>
                        </td>
                      </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage">
                      <tr>
                        <td colspan="7">No transactions found.</td>
                      </tr>
                    </ng-template>
                  </p-table>
                </div>
               </div>
              <!-- End Table with stripped rows -->

            </div>
          </div>

        </div>
      </div>
    </section>

  </main>
</ng-container>
